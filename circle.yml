machine:
  ghc:
    version: 7.8.3

dependencies:

  override:
    # GHC-7.10
    # - wget https://raw.githubusercontent.com/Daniel-Diaz/personal-shell-scripts/master/circlecighc710.sh
    # - sh circlecighc710.sh
    # Update cabal to create the standard cabal file
    - cabal update
    # Clone binary-transform repo
    - git clone https://github.com/plow-technologies/binary-transform.git
    # Start sandbox and install dependencies
    - cabal sandbox init
    - cabal sandbox add-source binary-transform
    - cabal install --enable-tests --only-dependencies -j8

test:
  override:
    - cabal configure --enable-tests --ghc-options=-Werror
    - cabal build
    - cabal test

deployment:
  staging:
    branch: master
    commands:
      - git clone git@github.com:plow-technologies/plow-scripts.git
      - sh plow-scripts/hackagecircle.sh
